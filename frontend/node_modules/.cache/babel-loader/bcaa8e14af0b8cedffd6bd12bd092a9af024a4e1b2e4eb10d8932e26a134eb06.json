{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-3155ac83\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"scoreboard-title text-center my-4\"\n}, \"Login\", -1 /* HOISTED */));\nconst _hoisted_3 = {\n  key: 0,\n  class: \"error\"\n};\nconst _hoisted_4 = {\n  class: \"form-container transparent-bg\"\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"loginUsername\"\n}, \"Username:\", -1 /* HOISTED */));\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"loginPassword\"\n}, \"Password:\", -1 /* HOISTED */));\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\"\n}, \"Login\", -1 /* HOISTED */));\nconst _hoisted_8 = {\n  class: \"login-button\"\n};\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"Don't have an account?\", -1 /* HOISTED */));\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"div\", _hoisted_1, [_hoisted_2, $setup.errorMessage ? (_openBlock(), _createElementBlock(\"p\", _hoisted_3, _toDisplayString($setup.errorMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $setup.submitLogin && $setup.submitLogin(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", null, [_hoisted_5, _withDirectives(_createElementVNode(\"input\", {\n    id: \"loginUsername\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.loginForm.username = $event),\n    type: \"text\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.loginForm.username]])]), _createElementVNode(\"div\", null, [_hoisted_6, _withDirectives(_createElementVNode(\"input\", {\n    id: \"loginPassword\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.loginForm.password = $event),\n    type: \"password\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.loginForm.password]])]), _hoisted_7], 32 /* NEED_HYDRATION */)]), _createElementVNode(\"div\", _hoisted_8, [_hoisted_9, _createElementVNode(\"button\", {\n    class: \"btn\",\n    onClick: _cache[3] || (_cache[3] = (...args) => $setup.goToRegister && $setup.goToRegister(...args)),\n    style: {\n      \"margin-left\": \"10px\",\n      \"background-color\": \"orange\"\n    }\n  }, \"Register\")])])]);\n}","map":{"version":3,"names":["class","_createElementVNode","key","for","type","_createElementBlock","_hoisted_1","_hoisted_2","$setup","errorMessage","_hoisted_3","_toDisplayString","_createCommentVNode","_hoisted_4","onSubmit","_cache","_withModifiers","args","submitLogin","_hoisted_5","id","$event","loginForm","username","required","_hoisted_6","password","_hoisted_7","_hoisted_8","_hoisted_9","onClick","goToRegister","style"],"sources":["C:\\Users\\Djeja\\Desktop\\DjangoVue-Game\\frontend\\src\\views\\LoginForm.vue"],"sourcesContent":["<template>\r\n\t<div>\r\n\t\t<div class=\"container\">\r\n\t\t\t<h1 class=\"scoreboard-title text-center my-4\">Login</h1>\r\n\t\t\t<p v-if=\"errorMessage\" class=\"error\">{{ errorMessage }}</p>\r\n\t\t\t<div class=\"form-container transparent-bg\">\r\n\t\t\t\t<form @submit.prevent=\"submitLogin\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<label for=\"loginUsername\">Username:</label>\r\n\t\t\t\t\t\t<input id=\"loginUsername\" v-model=\"loginForm.username\" type=\"text\" required />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<label for=\"loginPassword\">Password:</label>\r\n\t\t\t\t\t\t<input id=\"loginPassword\" v-model=\"loginForm.password\" type=\"password\" required />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button type=\"submit\">Login</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"login-button\">\r\n\t\t\t\t<span>Don't have an account?</span>\r\n\t\t\t\t<button class=\"btn\" @click=\"goToRegister\" style=\"margin-left: 10px; background-color: orange\">Register</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, toRaw, onMounted, ref } from \"vue\";\r\nimport axios from \"axios\";\r\nimport { useRouter, useRoute } from \"vue-router\";\r\n\r\nexport default {\r\n\tsetup() {\r\n\t\tconst loginForm = reactive({\r\n\t\t\tusername: \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t});\r\n\t\tconst errorMessage = ref(null);\r\n\t\tconst route = useRoute();\r\n\t\tconst router = useRouter();\r\n\r\n\t\tfunction goToRegister() {\r\n\t\t\trouter.push(\"/register\");\r\n\t\t}\r\n\t\t\r\n\t\tonMounted(() => {\r\n\t\t\tif (route.query.username) {\r\n\t\t\t\tloginForm.username = route.query.username;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tasync function submitLogin() {\r\n\t\t\tconst formData = toRaw(loginForm);\r\n\r\n\t\t\ttry {\r\n\t\t\t\tconst response = await axios.post(\"http://localhost:8000/api/login/\", formData);\r\n\r\n\t\t\t\tif (response.data.success) {\r\n\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\tconst accessToken = response.data.access_token;\r\n\t\t\t\t\tconst refreshToken = response.data.refresh_token;\r\n\t\t\t\t\tlocalStorage.setItem(\"user\", JSON.stringify(response.data));\r\n\t\t\t\t\tlocalStorage.setItem(\"accessToken\", accessToken);\r\n\t\t\t\t\tlocalStorage.setItem(\"refreshToken\", refreshToken);\r\n\t\t\t\t\trouter.push(\"/\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.error(\"Błąd logowania:\", response.data.message, response.data.errors);\r\n\t\t\t\t\terrorMessage.value = response.data.message;\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error(\"Błąd wysyłania danych:\", error);\r\n\t\t\t\tif (error.response) {\r\n\t\t\t\t\t\r\n\t\t\t\t\terrorMessage.value = error.response.data.message;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t\r\n\t\t\t\t\terrorMessage.value = \"Failed to send data to server\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn { loginForm, submitLogin, errorMessage, goToRegister };\r\n\t},\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n\tbox-sizing: border-box;\r\n\tmax-width: 100%;\r\n\toverflow-x: hidden;\r\n}\r\n.transparent-bg {\r\n\tbackground-color: transparent !important;\r\n\tcolor: white !important;\r\n\tborder: none !important;\r\n}\r\n.form-container {\r\n\twidth: 100%;\r\n\tmax-width: 600px;\r\n\tmargin: 0 auto;\r\n\tpadding: 20px;\r\n\tbackground-color: #f8f9fa;\r\n\tborder: 1px solid #dee2e6;\r\n\tborder-radius: 5px;\r\n}\r\n\r\nform div {\r\n\tmargin-bottom: 10px;\r\n}\r\n\r\nform label {\r\n\tdisplay: block;\r\n\tmargin-bottom: 5px;\r\n}\r\n\r\nform input {\r\n\twidth: 100%;\r\n\tpadding: 5px;\r\n\tborder: 1px solid #ced4da;\r\n\tborder-radius: 3px;\r\n\tbackground-color: transparent !important;\r\n\tcolor: white !important;\r\n}\r\n\r\nform button {\r\n\tmargin-top: 20px;\r\n\tpadding: 10px 20px;\r\n\tbackground-color: #007bff;\r\n\tcolor: #fff;\r\n\tborder: none;\r\n\tborder-radius: 3px;\r\n\tcursor: pointer;\r\n}\r\nform button:hover {\r\n\tbackground-color: #0056b3;\r\n}\r\n.login-button {\r\n\tmargin-top: 20px;\r\n\tmargin-bottom: 20px;\r\n}\r\n</style>\r\n"],"mappings":";;;EAEOA,KAAK,EAAC;AAAW;gEACrBC,mBAAA,CAAwD;EAApDD,KAAK,EAAC;AAAmC,GAAC,OAAK;;EAHtDE,GAAA;EAI0BF,KAAK,EAAC;;;EACxBA,KAAK,EAAC;AAA+B;gEAGvCC,mBAAA,CAA4C;EAArCE,GAAG,EAAC;AAAe,GAAC,WAAS;gEAIpCF,mBAAA,CAA4C;EAArCE,GAAG,EAAC;AAAe,GAAC,WAAS;gEAGrCF,mBAAA,CAAoC;EAA5BG,IAAI,EAAC;AAAQ,GAAC,OAAK;;EAGxBJ,KAAK,EAAC;AAAc;gEACxBC,mBAAA,CAAmC,cAA7B,wBAAsB;;uBAlB/BI,mBAAA,CAsBM,cArBLJ,mBAAA,CAoBM,OApBNK,UAoBM,GAnBLC,UAAwD,EAC/CC,MAAA,CAAAC,YAAY,I,cAArBJ,mBAAA,CAA2D,KAA3DK,UAA2D,EAAAC,gBAAA,CAAnBH,MAAA,CAAAC,YAAY,oBAJvDG,mBAAA,gBAKGX,mBAAA,CAYM,OAZNY,UAYM,GAXLZ,mBAAA,CAUO;IAVAa,QAAM,EAAAC,MAAA,QAAAA,MAAA,MANjBC,cAAA,KAAAC,IAAA,KAM2BT,MAAA,CAAAU,WAAA,IAAAV,MAAA,CAAAU,WAAA,IAAAD,IAAA,CAAW;MACjChB,mBAAA,CAGM,cAFLkB,UAA4C,E,gBAC5ClB,mBAAA,CAA8E;IAAvEmB,EAAE,EAAC,eAAe;IAT/B,uBAAAL,MAAA,QAAAA,MAAA,MAAAM,MAAA,IASyCb,MAAA,CAAAc,SAAS,CAACC,QAAQ,GAAAF,MAAA;IAAEjB,IAAI,EAAC,MAAM;IAACoB,QAAQ,EAAR;iDAAhChB,MAAA,CAAAc,SAAS,CAACC,QAAQ,E,KAEtDtB,mBAAA,CAGM,cAFLwB,UAA4C,E,gBAC5CxB,mBAAA,CAAkF;IAA3EmB,EAAE,EAAC,eAAe;IAb/B,uBAAAL,MAAA,QAAAA,MAAA,MAAAM,MAAA,IAayCb,MAAA,CAAAc,SAAS,CAACI,QAAQ,GAAAL,MAAA;IAAEjB,IAAI,EAAC,UAAU;IAACoB,QAAQ,EAAR;iDAApChB,MAAA,CAAAc,SAAS,CAACI,QAAQ,E,KAEtDC,UAAoC,C,8BAGtC1B,mBAAA,CAGM,OAHN2B,UAGM,GAFLC,UAAmC,EACnC5B,mBAAA,CAA+G;IAAvGD,KAAK,EAAC,KAAK;IAAE8B,OAAK,EAAAf,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAET,MAAA,CAAAuB,YAAA,IAAAvB,MAAA,CAAAuB,YAAA,IAAAd,IAAA,CAAY;IAAEe,KAAmD,EAAnD;MAAA;MAAA;IAAA;KAAoD,UAAQ,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}